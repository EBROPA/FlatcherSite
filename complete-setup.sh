#!/bin/bash

# –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ FlatcherSite

echo "üöÄ –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ FlatcherSite"
echo "=================================="
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
if [ ! -f "package.json" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: package.json –Ω–µ –Ω–∞–π–¥–µ–Ω. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞."
    exit 1
fi

echo "‚úÖ –ü—Ä–æ–µ–∫—Ç –Ω–∞–π–¥–µ–Ω"
echo ""

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å Git
echo "üìä –°—Ç–∞—Ç—É—Å Git:"
git status --short
echo ""

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã
echo "üìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã:"
git log --oneline -5
echo ""

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–≥–∏
echo "üè∑Ô∏è  –í–µ—Ä—Å–∏–∏:"
git tag
echo ""

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
echo "üîó –£–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:"
git remote -v
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º SSH –∫–ª—é—á
echo "üîë SSH –∫–ª—é—á –¥–ª—è GitHub:"
if [ -f ~/.ssh/github_flatcher.pub ]; then
    echo "‚úÖ SSH –∫–ª—é—á –Ω–∞–π–¥–µ–Ω:"
    cat ~/.ssh/github_flatcher.pub
    echo ""
    echo "üìã –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç –∫–ª—é—á –∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ GitHub:"
    echo "https://github.com/settings/keys"
    echo ""
else
    echo "‚ùå SSH –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω"
fi

echo "üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ:"
echo "1. –î–æ–±–∞–≤—å—Ç–µ SSH –∫–ª—é—á –≤ GitHub (—Å–º. –≤—ã—à–µ)"
echo "2. –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ Personal Access Token:"
echo "   https://github.com/settings/tokens"
echo ""
echo "3. –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:"
echo "   git push -u origin main"
echo "   git push origin v1.0.0"
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
if [ -n "$(git status --porcelain)" ]; then
    echo "‚ö†Ô∏è  –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è!"
    echo "–•–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –∏ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏—Ö? (y/n)"
    read -r response
    if [[ "$response" =~ ^[Yy]$ ]]; then
        echo "–î–æ–±–∞–≤–ª—è—é –∏–∑–º–µ–Ω–µ–Ω–∏—è..."
        git add .
        echo "–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞:"
        read -r commit_message
        git commit -m "$commit_message"
        echo "‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã"
    fi
fi

echo ""
echo "üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
echo "1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é GitHub (—Å–º. GITHUB_SETUP.md)"
echo "2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–¥: git push -u origin main"
echo "3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–≥–∏: git push origin v1.0.0"
echo "4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ GitHub Pages (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
echo ""
echo "üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:"
echo "- README.md - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è"
echo "- GIT_WORKFLOW.md - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ Git"
echo "- QUICK_START.md - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç"
echo "- GITHUB_SETUP.md - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub"
echo ""
echo "üîß –ü–æ–ª–µ–∑–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:"
echo "- ./setup-github.sh - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫"
echo "- ./deploy-to-github.sh - –±—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π"
echo "- ./complete-setup.sh - —ç—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è"
echo ""
echo "üåê –°—Å—ã–ª–∫–∏:"
echo "- GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/EBROPA/FlatcherSite"
echo "- –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–∞–π—Ç: http://localhost:5173"
echo ""
echo "üéâ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –£–¥–∞—á–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!"
