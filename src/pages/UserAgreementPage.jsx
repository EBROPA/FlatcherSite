import React from "react";
import styles from "./pageCSS/SitePrivacyPage.module.css";

const introContent = [
  "Настоящее Пользовательское соглашение (далее — «Соглашение») является офертой (публичной офертой) Индивидуального предпринимателя Гусева Никиты Олеговича (далее — «Компания», «Оператор») любому физическому лицу — пользователю сайта https://flatcher.su (далее — «Пользователь», «Сайт»). Принятием Соглашения считается начало использования Сайта Пользователем в любой форме (просмотр страниц, отправка форм, заказ обратного звонка и т.п.).",
  "Соглашение разработано и действует во взаимосвязи с применимым законодательством Российской Федерации, в том числе с положениями Гражданского кодекса РФ и Федерального закона от 27.07.2006 №152-ФЗ «О персональных данных», а также с иными нормативными актами, регулирующими отношения в сфере информационных технологий и защиты прав потребителей. В случаях, прямо предусмотренных законодательством, Оператор руководствуется и иными федеральными законами (включая федеральные нормы о противодействии правонарушениям в ИКТ)."
];

const sections = [
  {
    id: 1,
    title: "1. Термины и определения",
    content: [
      "1.1. Соглашение — настоящий документ, размещённый по адресу https://flatcher.su/user-agreement.",
      "1.2. Компания / Оператор — ИП Гусев Никита Олегович, ИНН: 772465913434, ОГРН: 325774600205503, адрес: 125373, г. Москва, Походный проезд, домовладение 3, стр.2, e-mail: info@flatcher.su.",
      "1.3. Пользователь — любое физическое лицо, использующее Сайт и согласное с условиями Соглашения.",
      "1.4. Контент Сайта — любые текстовые, графические, фото-, аудио- и видеоматериалы, программный код, база данных и иные результаты интеллектуальной деятельности, размещённые на Сайте.",
      "1.5. Персональные данные — сведения о Пользователе, позволяющие прямо или косвенно установить личность Пользователя.",
      "1.6. Политика обработки персональных данных и файлов Cookie — отдельный документ, размещённый на Сайте, содержащий подробное описание порядка и правовых оснований обработки персональных данных, категорий обрабатываемых данных, сроков хранения, порядка получения и отзыва согласия, а также порядок использования файлов cookie и иных аналогичных технологий.",
      "1.7. Согласие на обработку персональных данных (Согласие) — отдельное волеизъявление Пользователя, выраженное в форме, допускающей фиксацию факта и содержания такого согласия (чекбокс, отдельная страница/модал, аудиозапись и пр.), удостоверяющее согласие Пользователя на обработку его персональных данных в обозначенных целях.",
      "1.8. Обработка персональных данных (Обработка) — любое действие (операция) или совокупность действий с персональными данными, совершаемых с использованием или без использования средств автоматизации, включая сбор, запись, систематизацию, накопление, хранение, уточнение (обновление), извлечение, использование, передачу (распространение, предоставление, доступ), обезличивание, блокирование и уничтожение.",
      "1.9. Обработчик — третье лицо, осуществляющее обработку персональных данных по поручению Оператора на основании договора, предусматривающего обязанности по обеспечению конфиденциальности и безопасности ПДн.",
      "1.10. Cookies (файлы cookie) — небольшие фрагменты данных, сохраняемые на устройстве Пользователя при посещении Сайта с целью идентификации сессии, хранения предпочтений, аналитики и иных технически необходимых функций; подробный порядок использования cookies описан в Политике обработки персональных данных и файлов Cookie.",
      "1.11. Do-not-call / реестр отказов — система регистрации номеров телефонов и иных контактов, по которым Пользователь заявил о запрете получения маркетинговых и рекламных звонков и сообщений, и которые Оператор обязуется учитывать при проведении кампаний.",
      "1.12. Реестр обработок / Реестр операций обработки — внутренний учёт операций и категорий обработки персональных данных, ведение которого позволяет отслеживать цели, правовые основания, сроки хранения и круг обрабатывающих лиц."
    ],
  },
  {
    id: 2,
    title: "2. Преамбула",
    content: [
      "2.1. Продолжая пользоваться Сайтом, Пользователь подтверждает ознакомление и безоговорочное принятие условий настоящего Соглашения.",
      "2.2. Компания предоставляет Сайт «как есть», без дополнительных гарантий, за исключением случаев, прямо предусмотренных законодательством РФ."
    ],
  },
  {
    id: 3,
    title: "3. Порядок акцепта",
    content: [
      "3.1. Акцептом Соглашения считается совершение Пользователем действий, связанных с использованием функций Сайта (просмотр страниц, отправка форм, заказ услуг и пр.). Молчание Пользователя не является акцептом, за исключением случаев, прямо предусмотренных законом или отдельно согласованных сторонами.",
      "3.2. В отдельных случаях (например, заключение договора, оказание платных услуг) акцепт может требовать проставления отметки/чекбокса о согласии и/или ввода подтверждающих данных; в таких случаях порядок акцепта оговаривается отдельно."
    ],
  },
  {
    id: 4,
    title: "4. Предмет Соглашения",
    content: [
      "4.1. Компания предоставляет Пользователю право использовать Сайт и его функционал для ознакомления с Контентом, оформления заявок, заказа обратного звонка, связи с Компанией и иного функционала, доступного на Сайте.",
      "4.2. Использование Сайта допускается при условии согласия Пользователя на обработку персональных данных в порядке, предусмотренном Политикой обработки персональных данных и Cookies, размещённой на Сайте."
    ],
  },
  {
    id: 5,
    title: "5. Права и обязанности сторон",
    content: [
      "5.1. Компания обязуется: обеспечивать доступ к Сайту, за исключением плановых и внеплановых работ; защищать права интеллектуальной собственности на Контент Сайта; обеспечивать обработку персональных данных в соответствии с Политикой и действующим законодательством РФ; рассматривать обращения и претензии Пользователей в порядке, предусмотренном на Сайте.",
      "5.2. Компания вправе: вносить изменения в Сайт и Соглашение в одностороннем порядке с публикацией новой редакции на Сайте; временно приостанавливать работу Сайта по техническим или иным причинам; ограничивать доступ к Сайту при нарушении Пользователем условий Соглашения.",
      "5.3. Пользователь обязуется: предоставлять достоверные контактные данные; не размещать незаконный, оскорбительный или иным образом запрещённый Контент; не предпринимать действий, нарушающих нормальную работу Сайта (включая попытки несанкционированного доступа, автоматизированный сбор данных и т.п.).",
      "5.4. Пользователь вправе: использовать Контент Сайта для личного некоммерческого ознакомления; требовать удаления/изменения собственных персональных данных в порядке, предусмотренном Политикой конфиденциальности; направлять вопросы и обращения на e-mail info@flatcher.su.",
      "5.5. Возрастные ограничения и несовершеннолетние. Использование Сайта лицами моложе 18 (восемнадцати) лет допускается при согласии их законных представителей, если иное прямо не предусмотрено законодательством. В отношении лиц младше 14 (четырнадцати) лет обработка персональных данных разрешается только с согласия их законных представителей. Оператор вправе запрашивать у Пользователя документы, подтверждающие согласие законного представителя при предоставлении услуг/записи на платные услуги или при обработке чувствительных данных."
    ],
  },
  {
    id: 6,
    title: "6. Ограничения и ответственность",
    content: [
      "6.1. Пользователь не имеет права копировать, распространять, модифицировать Контент Сайта в объёме, превышающем личное использование, без письменного согласия Компании.",
      "6.2. Компания не несёт ответственности за убытки Пользователя, если они возникли в результате ненадлежащего использования Сайта или нарушения Пользователем условий Соглашения.",
      "6.3. Компания не несёт ответственности за содержание внешних ресурсов, ссылки на которые могут размещаться на Сайте.",
      "6.4. Ограничение ответственности не распространяется на случаи, прямо предусмотренные законодательством РФ."
    ],
  },
  {
    id: 7,
    title: "7. Обработка персональных данных",
    content: [
      "7.1. Вопросы, порядок и условия обработки персональных данных, а также порядок использования файлов cookie и порядок получения согласий регулируются отдельными документами: «Политикой обработки персональных данных и файлов Cookie» и «Согласием на обработку персональных данных», которые являются неотъемлемой частью отношений между Оператором и Пользователем и размещены на Сайте. Положения настоящего раздела не дублируют и не заменяют указанные документы.",
      "7.2. Для оперативной связи по вопросам обработки персональных данных Пользователь может направлять запросы по адресу info@flatcher.su либо воспользоваться формой обратной связи, размещённой на Сайте. При наличии назначенного ответственного за организацию обработки персональных данных (далее — «Ответственное лицо») его контактные данные также размещаются в Политике обработки персональных данных."
    ],
  },
  {
    id: 8,
    title: "8. Интеллектуальная собственность",
    content: [
      "8.1. Все права на Контент Сайта принадлежат Компании или приобретены Компанией на законном основании. Любое использование Контента помимо личного ознакомления допускается только с письменного согласия Компании.",
      "8.2. Использование материалов Сайта с указанием источника допускается только в объёме, не противоречащем авторским правам и иным правовым нормам."
    ],
  },
  {
    id: 9,
    title: "9. Безопасность и порядок хранения данных",
    content: [
      "9.1. Оператор применяет организационные и технические меры для защиты персональных данных от несанкционированного доступа, утраты, модификации и распространения.",
      "9.2. Оператор осуществляет ведение реестра обработок, регистрирует доступы, а также проводит оценку рисков и осуществляет внутренний контроль в соответствии с требованиями законодательства."
    ],
  },
  {
    id: 10,
    title: "10. Размещение сторонних ссылок и материалы третьих лиц",
    content: [
      "10.1. Сайт может содержать ссылки на сторонние ресурсы. Компания не несёт ответственности за содержание, качество услуг и политику конфиденциальности сторонних ресурсов."
    ],
  },
  {
    id: 11,
    title: "11. Форс-мажор",
    content: [
      "11.1. Стороны освобождаются от ответственности за частичное или полное неисполнение своих обязательств, если надлежащее исполнение стало невозможным вследствие обстоятельств непреодолимой силы (форс-мажор), подтверждённых в установленном порядке."
    ],
  },
  {
    id: 12,
    title: "12. Изменение Соглашения",
    content: [
      "12.1. Компания вправе вносить изменения в Соглашение. Новая редакция публикуется на Сайте с указанием даты вступления в силу. Продолжение использования Сайта после публикации новой редакции означает согласие Пользователя с изменениями."
    ],
  },
  {
    id: 13,
    title: "13. Прекращение и блокировка доступа",
    content: [
      "13.1. Компания вправе приостанавливать или прекращать доступ Пользователя к Сайту при нарушении условий Соглашения или действующего законодательства."
    ],
  },
  {
    id: 14,
    title: "14. Разрешение споров",
    content: [
      "14.1. Все споры по настоящему Соглашению решаются путём переговоров. В случае недостижения согласия спор подлежит рассмотрению в суде по месту нахождения Оператора, если иное не предусмотрено законодательством РФ."
    ],
  },
  {
    id: 15,
    title: "15. Прочие условия",
    content: [
      "15.1. Если какое-либо положение Соглашения признаётся недействительным, это не влечёт недействительность остальных положений.",
      "15.2. Контактная информация Оператора: info@flatcher.su; адрес: 125373, г. Москва, Походный проезд, домовладение 3, стр.2."
    ],
  },
];

const linkPattern = /(https?:\/\/[^\s"']+)|([A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,})/g;

const renderContentWithLinks = (line) => {
  if (typeof line !== "string") {
    return line;
  }

  const parts = [];
  let lastIndex = 0;

  line.replace(linkPattern, (match, urlMatch, emailMatch, offset) => {
    if (offset > lastIndex) {
      parts.push(line.slice(lastIndex, offset));
    }

    const isUrl = Boolean(urlMatch);
    const href = isUrl ? match : `mailto:${match}`;

    parts.push(
      <a
        key={`${href}-${offset}`}
        href={href}
        target={isUrl ? "_blank" : undefined}
        rel={isUrl ? "noopener noreferrer" : undefined}
      >
        {match}
      </a>
    );

    lastIndex = offset + match.length;
    return match;
  });

  if (lastIndex < line.length) {
    parts.push(line.slice(lastIndex));
  }

  return parts.length > 0 ? parts : line;
};

export default function UserAgreementPage() {
  return (
    <div className={styles.container}>
      <h1 className={styles.heading}>ПОЛЬЗОВАТЕЛЬСКОЕ СОГЛАШЕНИЕ</h1>
      {introContent.map((paragraph, index) => (
        <p key={`intro-${index}`} className={styles.lead}>
          {renderContentWithLinks(paragraph)}
        </p>
      ))}
      <ul className={styles.sections}>
        {sections.map(({ id, title, content }) => (
          <li key={id} className={styles.section}>
            <div className={styles.side}>
              <h2 className={styles.title}>{title}</h2>
            </div>
            <div className={styles.content}>
              {content.map((line, index) => (
                <p key={index} className={line.startsWith("—") ? styles.bullet : ""}>
                  {renderContentWithLinks(line)}
                </p>
              ))}
            </div>
          </li>
        ))}
      </ul>
    </div>
  );
}
