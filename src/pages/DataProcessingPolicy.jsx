import React from "react";
import styles from "./pageCSS/SitePrivacyPage.module.css";

const introContent = [
  "Ссылка на документ: https://flatcher.su/data-processing"
];

const sections = [
  {
    id: 1,
    title: "1. Общие положения и термины",
    content: [
      "1.1. Настоящая Политика определяет принципы и порядок обработки Персональных данных и использования файлов cookie на сайте https://flatcher.su (далее — «Сайт»). Политика действует в отношении всех данных, передаваемых Пользователями и иными лицами при использовании Сайта.",
      "1.2. Оператор / «Мы» / «Нас» — Индивидуальный предприниматель Гусев Никита Олегович, ИНН 772465913434, ОГРН 325774600205503, адрес: 125373, г. Москва, Походный проезд, домовладение 3, стр.2. Контакты: info@flatcher.su. Вопросы по обработке ПДн — privacy@flatcher.su.",
      "1.3. Субъект персональных данных / «Вы» — физическое лицо, чьи Персональные данные обрабатываются Оператором (Пользователь Сайта, посетитель, заявитель и т.п.).",
      "1.4. Персональные данные — любые сведения, относящиеся к идентифицированному или идентифицируемому физическому лицу.",
      "1.5. Обработка персональных данных — любое действие (операция) с ПДн (сбор, запись, хранение, использование, передача, уничтожение и т.п.), в том числе автоматизированное.",
      "1.6. Обработчик — третье лицо, выполняющее обработку ПДн по поручению Оператора на основании договора.",
      "1.7. Cookies (файлы cookie) — небольшие фрагменты данных, сохраняемые на устройстве Пользователя при посещении Сайта, используемые для сохранения настроек, аналитики и иного.",
      "1.8. Do-not-call / реестр отказов — внутренний реестр номеров и контактов, к которым применён запрет на маркетинговые/рекламные звонки."
    ],
  },
  {
    id: 2,
    title: "2. Правовая основа Политики",
    content: [
      "2.1. Политика разработана и действует в соответствии с действующим законодательством Российской Федерации, в том числе Федеральным законом от 27.07.2006 №152-ФЗ «О персональных данных», Федеральным законом от 01.04.2025 №41-ФЗ и иными подзаконными актами, а также с учётом отдельных нормативов законодательства Объединённых Арабских Эмиратов, применимых при трансграничной обработке/передаче данных в ОАЭ.",
      "2.2. Политика является общедоступным документом и размещена по адресу: https://flatcher.su/data-processing."
    ],
  },
  {
    id: 3,
    title: "3. Цели и основания обработки",
    content: [
      "3.1. Основные цели обработки ваших Персональных данных: обработка заявок и обратная связь (заказы обратного звонка, ответы в мессенджерах); исполнение договоров и оказание услуг на Ваше обращение; ведение клиентской/бухгалтерской документации; проведение маркетинговых коммуникаций (только при наличии отдельного явного согласия); обеспечение безопасности Сайта, аналитика и улучшение сервиса; исполнение требований уполномоченных органов в случаях, предусмотренных законом.",
      "3.2. Правовые основания обработки: Ваше добровольное и информированное согласие; исполнение договора; исполнение обязанностей, установленных законодательством; законные интересы Оператора, если они не противоречат правам и свободам субъектов персональных данных.",
      "3.3. Массовые/маркетинговые звонки и рассылки осуществляются только при наличии отдельного, явно выраженного и задокументированного согласия на маркетинг; для обзвонов, переданных Клиентом номеров третьих лиц, Оператор требует от Клиента подтверждений наличия соответствующих согласий у владельцев номеров."
    ],
  },
  {
    id: 4,
    title: "4. Перечень обрабатываемых данных",
    content: [
      "4.1. В зависимости от ситуации Оператор может обрабатывать: ФИО, телефон, e-mail, адрес доставки, IP-адрес, данные cookies, сведения о сессии, сведения, переданные через мессенджеры (идентификатор аккаунта), иные сведения, предоставленные добровольно.",
      "4.2. Если Вы предоставляете ПД третьих лиц, Вы гарантирyете наличие у Вас всех необходимых прав и согласий на передачу и обработку таких данных; при необходимости Вы обязаны предоставить копии подтверждающих документов по запросу Оператора."
    ],
  },
  {
    id: 5,
    title: "5. Особые категории данных и несовершеннолетние",
    content: [
      "5.1. Оператор не намерен собирать или обрабатывать особо чувствительные категории ПД (состояние здоровья, биометрические данные и т.п.), за исключением случаев, предусмотренных законом и с Вашего отдельного согласия.",
      "5.2. Дети и несовершеннолетние: обработка ПД лиц младше 14 лет допускается только с согласия их законных представителей; для лиц от 14 до 18 лет рекомендуется получить согласие законного представителя в случаях, требующих повышенной осторожности. Оператор оставляет за собой право запрашивать подтверждающие документы в случаях оказания платных услуг или при необходимости обработки чувствительных данных."
    ],
  },
  {
    id: 6,
    title: "6. Порядок получения и фиксации согласий",
    content: [
      "6.1. Все согласия фиксируются отдельным волеизъявлением субъекта (не «спрятаны» в тексте оферты) — через отдельный чекбокс, отдельную страницу/форму или аудиозапись. При фиксации согласия Оператор сохраняет метаданные: дату/время, IP-адрес, user-agent, идентификатор версии текста согласия.",
      "6.2. Согласие на маркетинг оформляется отдельно от согласия на обработку заявок/выполнение договора. Отзыв согласия возможен в любой момент — через форму на Сайте, по e-mail privacy@flatcher.su либо иным способом, указанным в согласии. Оператор прекращает обработку, требующую согласия, в разумный срок (не более 3 рабочих дней с момента получения отзыва), если иное не установлено законом или договором."
    ],
  },
  {
    id: 7,
    title: "7. Сроки хранения",
    content: [
      "7.1. Сроки хранения персональных данных определяются целями обработки, требованиями законодательства и внутренними правилами Оператора. Рекомендуемые (по умолчанию) сроки хранения: элементы фиксации согласий (метаданные) — не менее 3 лет; данные, связанные с исполнением заказа/договора — срок исполнения договора + 3 года (для отчетности и защиты прав); журналы доступа и логи безопасности — не менее 1–3 лет в зависимости от типа лога; маркетинговые согласия и историю коммуникаций — не менее 3 лет или до отзыва согласия.",
      "7.2. При необходимости и в случаях, предусмотренных законом, сроки хранения могут быть скорректированы; о конкретных сроках можно узнать, направив запрос на privacy@flatcher.su."
    ],
  },
  {
    id: 8,
    title: "8. Порядок передачи и трансграничная передача данных",
    content: [
      "8.1. Передача ПД третьим лицам (провайдерам, платёжным и телеком-сервисам, маркетинговым платформам) осуществляется только в объёме, необходимом для достижения целей обработки и на основании договоров (договора поручения/обработки) с обязательными техническими и организационными требованиями по защите данных.",
      "8.2. Локализация: для субъектов РФ Оператор обеспечивает хранение и обработку ПД на серверах, расположенных на территории Российской Федерации в порядке, установленном законом. При трансграничной передаче в ОАЭ Оператор руководствуется применимыми нормами ОАЭ и обеспечивает необходимые гарантии защиты данных.",
      "8.3. В иных случаях трансграничная передача возможна лишь при наличии правовой возможности и гарантий защиты данных, а также с учётом требований российского законодательства о локализации и иными применимыми нормативами."
    ],
  },
  {
    id: 9,
    title: "9. Права субъектов персональных данных",
    content: [
      "9.1. Вы вправе: получать подтверждение факта обработки ПДн; доступ к своим данным; требовать уточнения, блокирования или уничтожения ПДн при основаниях, предусмотренных законом; отозвать согласие; направлять жалобы в уполномоченный орган (Роскомнадзор) и в суд.",
      "9.2. Запросы по реализации прав надлежит направлять на privacy@flatcher.su или почтовым отправлением по адресу Оператора; Оператор обязуется ответить в сроки, предусмотренные законодательством (обычно 30 дней, с возможным продлением при необходимости)."
    ],
  },
  {
    id: 10,
    title: "10. cookies — использование и управление",
    content: [
      "10.1. Сайт использует технические (необходимые), аналитические и функциональные cookies. При первом посещении Сайта Пользователю предоставляется информационный баннер/панель согласия с возможностью принять или отклонить несущественные cookies.",
      "10.2. Технические cookies необходимы для работы Сайта и не требуют отдельного согласия; аналитические и маркетинговые cookies подключаются только при явном согласии Пользователя.",
      "10.3. Инструкции по управлению cookies доступны в настройках браузера и в разделах www.aboutcookies.org. Отключение cookies может снизить функциональность Сайта."
    ],
  },
  {
    id: 11,
    title: "11. Безопасность ПДн",
    content: [
      "11.1. Оператор применяет правовые, организационные и технические меры защиты ПДн: разграничение доступа, шифрование при передаче, контроль доступа к помещениям и системам, резервное копирование, антивирусные средства, обучение сотрудников, обязательства о неразглашении.",
      "11.2. В случае выявления утечки/нарушения безопасности Оператор осуществляет внутреннюю процедуру реагирования, уведомляет пострадавших субъектов и уполномоченные органы в сроки и форме, предусмотренные действующим законодательством."
    ],
  },
  {
    id: 12,
    title: "12. Обработка данных для обзвонов и маркетинга; реестр отказов",
    content: [
      "12.1. Оператор осуществляет массовые обзвоны/рассылки только при наличии отдельного маркетингового согласия; все коммуникации адресного маркетинга сопровождаются возможностью простого отказа (opt-out).",
      "12.2. Оператор ведёт и поддерживает реестр отказов (do-not-call). Номера, внесённые в реестр, не используются в маркетинговых кампаниях.",
      "12.3. При получении номеров от клиентов-третьих лиц Оператор запрашивает доказательства наличия согласий владельцев номеров; при отсутствии подтверждения Оператор вправе отказаться от проведения кампании по таким номерам.",
      "12.4. Оператор стремится к соблюдению правил маркировки исходящих вызовов в соответствии с требованиями операторов связи и действующих правовых актов; при использовании услуг провайдеров связи Оператор проверяет доступность маркировки и сообщает клиентам о применении соответствующих технических решений."
    ],
  },
  {
    id: 13,
    title: "13. Взаимодействие с уполномоченными органами и гос. системами",
    content: [
      "13.1. В случаях, прямо предусмотренных законом (включая Федеральный закон №41-ФЗ от 01.04.2025), Оператор обязан по законному запросу предоставлять уполномоченным государственным органам информацию, логи и метаданные в объёме, установленном законом. Оператор сохраняет необходимые логи и метаданные для выполнения takich законных запросов."
    ],
  },
  {
    id: 14,
    title: "14. Ответственность и разрешение споров",
    content: [
      "14.1. Оператор несёт ответственность в пределах, установленных законодательством РФ. Субъекты, чьи права нарушены, могут обращаться в уполномоченные органы и в суд.",
      "14.2. Все споры решаются путём переговоров; при недостижении согласия — в суде по месту нахождения Оператора, если иное не предусмотрено законом."
    ],
  },
  {
    id: 15,
    title: "15. Изменение Политики",
    content: [
      "15.1. Мы вправе вносить изменения в Политику. Новая редакция публикуется на Сайте с указанием даты вступления в силу. Продолжение использования Сайта после публикации новой редакции означает согласие с изменениями."
    ],
  },
  {
    id: 16,
    title: "16. Контакты",
    content: [
      "16.1. Оператор: ИП Гусев Никита Олегович Адрес: 125373, г. Москва, Походный проезд, домовладение 3, стр.2 E-mail (общие вопросы): info@flatcher.su E-mail (вопросы по ПДн / отвод согласий): privacy@flatcher.su"
    ],
  },
];

const linkPattern = /(https?:\/\/[^\s"']+)|([A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,})/g;

const renderContentWithLinks = (line) => {
  if (typeof line !== "string") {
    return line;
  }

  const parts = [];
  let lastIndex = 0;

  line.replace(linkPattern, (match, urlMatch, emailMatch, offset) => {
    if (offset > lastIndex) {
      parts.push(line.slice(lastIndex, offset));
    }

    const isUrl = Boolean(urlMatch);
    const href = isUrl ? match : `mailto:${match}`;

    parts.push(
      <a
        key={`${href}-${offset}`}
        href={href}
        target={isUrl ? "_blank" : undefined}
        rel={isUrl ? "noopener noreferrer" : undefined}
      >
        {match}
      </a>
    );

    lastIndex = offset + match.length;
    return match;
  });

  if (lastIndex < line.length) {
    parts.push(line.slice(lastIndex));
  }

  return parts.length ? parts : line;
};

export default function DataProcessingPolicy() {
  return (
    <div className={styles.container}>
      <h1 className={styles.heading}>ПОЛИТИКА ОБРАБОТКИ ПЕРСОНАЛЬНЫХ ДАННЫХ И COOKIE</h1>
      {introContent.map((paragraph, index) => (
        <p key={`intro-${index}`} className={styles.lead}>
          {renderContentWithLinks(paragraph)}
        </p>
      ))}
      <ul className={styles.sections}>
        {sections.map(({ id, title, content }) => (
          <li key={id} className={styles.section}>
            <div className={styles.side}>
              <h2 className={styles.title}>{title}</h2>
            </div>
            <div className={styles.content}>
              {content.map((line, index) => (
                <p key={index} className={line.startsWith("—") ? styles.bullet : ""}>
                  {renderContentWithLinks(line)}
                </p>
              ))}
            </div>
          </li>
        ))}
      </ul>
    </div>
  );
}
